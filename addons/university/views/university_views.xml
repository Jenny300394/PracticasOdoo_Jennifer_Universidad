<odoo>

<!-- ========================= -->
<!--        UNIVERSITY         -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_university_tree" model="ir.ui.view">
    <field name="name">university.university.tree</field>
    <field name="model">university.university</field>
    <field name="arch" type="xml">
        <list>
            <field name="name"/>
            <field name="director_id"/>
            <field name="city"/>
            <field name="country_id"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_university_form" model="ir.ui.view">
    <field name="name">university.university.form</field>
    <field name="model">university.university</field>
    <field name="arch" type="xml">
        <form>
            <header>
                <button name="action_view_students" type="object" class="oe_stat_button" icon="fa-users">
                    <field name="student_count" widget="statinfo" string="Students"/>
                </button>
                <button name="action_view_professors" type="object" class="oe_stat_button" icon="fa-user">
                    <field name="professor_count" widget="statinfo" string="Professors"/>
                </button>
                <button name="action_view_departments" type="object" class="oe_stat_button" icon="fa-building">
                    <field name="department_count" widget="statinfo" string="Departments"/>
                </button>
                <button name="action_view_enrollments" type="object" class="oe_stat_button" icon="fa-book">
                    <field name="enrollment_count" widget="statinfo" string="Enrollments"/>
                </button>
            </header>

            <sheet>
                <group>
                    <field name="image_1920" widget="image"/>
                </group>

                <group>
                    <field name="name"/>
                    <field name="director_id"/>
                </group>

                <group string="Address">
                    <field name="street"/>
                    <field name="city"/>
                    <field name="state_id"/>
                    <field name="zip"/>
                    <field name="country_id"/>
                </group>

                <notebook>
                    <page string="Students">
                        <field name="student_ids">
                            <list>
                                <field name="name"/>
                                <field name="tutor_id"/>
                            </list>
                        </field>
                    </page>

                    <page string="Professors">
                        <field name="professor_ids">
                            <list>
                                <field name="name"/>
                                <field name="department_id"/>
                            </list>
                        </field>
                    </page>

                    <page string="Departments">
                        <field name="department_ids">
                            <list>
                                <field name="name"/>
                                <field name="manager_id"/>
                            </list>
                        </field>
                    </page>

                    <page string="Enrollments">
                        <field name="enrollment_ids">
                            <list>
                                <field name="student_id"/>
                                <field name="subject_id"/>
                                <field name="professor_id"/>
                            </list>
                        </field>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>

<!-- KANBAN VIEW -->
<record id="view_university_university_kanban" model="ir.ui.view">
    <field name="name">university.university.kanban</field>
    <field name="model">university.university</field>
    <field name="arch" type="xml">
        <kanban>
            <field name="image_1920"/>
            <field name="name"/>
            <field name="director_id"/>

            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click">
                        <field name="image_1920" widget="image" class="oe_kanban_avatar"/>
                        <strong><field name="name"/></strong>
                        <div>Director: <field name="director_id"/></div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--        DEPARTMENT         -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_department_tree" model="ir.ui.view">
    <field name="name">university.department.tree</field>
    <field name="model">university.department</field>
    <field name="arch" type="xml">
        <list>
            <field name="name"/>
            <field name="university_id"/>
            <field name="manager_id"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_department_form" model="ir.ui.view">
    <field name="name">university.department.form</field>
    <field name="model">university.department</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_view_professors" type="object" class="oe_stat_button" icon="fa-users">
                        <field name="professor_count" string="Profesores" widget="statinfo"/>
                    </button>
                </div>

                <div class="oe_title">
                    <label for="name" string="Departamento"/>
                    <h1>
                        <field name="name" placeholder="Ej. Facultad de Ciencias"/>
                    </h1>
                </div>

                <group>
                    <group>
                        <field name="university_id"/>
                        <field name="manager_id"/>
                    </group>
                </group>

                <notebook>
                    <page string="Profesores Asignados" name="professors">
                        <field name="professor_ids">
                            <list editable="bottom">
                                <field name="name"/>
                                </list>
                        </field>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>
<!-- KANBAN VIEW -->
<record id="view_university_department_kanban" model="ir.ui.view">
    <field name="name">university.department.kanban</field>
    <field name="model">university.department</field>
    <field name="arch" type="xml">
        <kanban sample="1">
            <field name="name"/>
            <field name="manager_id"/>
            <field name="university_id"/>
            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click d-flex flex-column p-2">
                        <div class="o_kanban_record_title h5 fw-bold mb-1">
                            <field name="name"/>
                        </div>
                        
                        <div class="text-muted small">
                            <i class="fa fa-university me-1 text-primary"/>
                            <field name="university_id"/>
                        </div>
                        
                        <div class="mt-2">
                            <t t-if="record.manager_id.raw_value">
                                <span class="badge rounded-pill text-bg-light border">
                                    <i class="fa fa-user me-1 text-secondary"/>
                                    <field name="manager_id"/>
                                </span>
                            </t>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--         PROFESSOR         -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_professor_tree" model="ir.ui.view">
    <field name="name">university.professor.tree</field>
    <field name="model">university.professor</field>
    <field name="arch" type="xml">
        <list>
            <field name="name"/>
            <field name="university_id"/>
            <field name="department_id"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_professor_form" model="ir.ui.view">
    <field name="name">university.professor.form</field>
    <field name="model">university.professor</field>
    <field name="arch" type="xml">
        <form>

            <header>
                <button name="action_view_enrollments"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-graduation-cap">
                    <field name="enrollment_count" widget="statinfo"/>
                </button>
            </header>

            <sheet>
                <field name="enrollment_count" invisible="1"/>

                <group>
                    <field name="image_1920" widget="image"/>
                </group>

                <group>
                    <field name="name"/>
                    <field name="university_id"/>
                    <field name="department_id"/>
                    <field name="department_ids" widget="many2many_tags"/>
                </group>

                <group>
                    <field name="subject_ids" widget="many2many_tags"/>
                </group>

                <notebook>
                    <page string="Enrollments">
                        <field name="enrollment_ids">
                            <list>
                                <field name="student_id"/>
                                <field name="subject_id"/>
                            </list>
                        </field>
                    </page>
                </notebook>

            </sheet>
        </form>
    </field>
</record>

<!-- KANBAN VIEW -->
<record id="view_university_professor_kanban" model="ir.ui.view">
    <field name="name">university.professor.kanban</field>
    <field name="model">university.professor</field>
    <field name="arch" type="xml">
        <kanban>
            <field name="image_1920"/>
            <field name="name"/>
            <field name="department_id"/>
            <field name="university_id"/>

            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click">
                        <field name="image_1920" widget="image" class="oe_kanban_avatar"/>
                        <strong><field name="name"/></strong>
                        <div>Department: <field name="department_id"/></div>
                        <div>University: <field name="university_id"/></div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--          SUBJECT          -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_subject_tree" model="ir.ui.view">
    <field name="name">university.subject.tree</field>
    <field name="model">university.subject</field>
    <field name="arch" type="xml">
        <list>
            <field name="name"/>
            <field name="university_id"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_subject_form" model="ir.ui.view">
    <field name="name">university.subject.form</field>
    <field name="model">university.subject</field>
    <field name="arch" type="xml">
        <form>

            <header>
                <button name="action_view_enrollments"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-graduation-cap">
                    <field name="enrollment_count" widget="statinfo"/>
                </button>
            </header>

            <sheet>
                <field name="enrollment_count" invisible="1"/>

                <group>
                    <field name="name"/>
                    <field name="university_id"/>
                    <field name="professor_ids" widget="many2many_tags"/>
                </group>

                <notebook>
                    <page string="Enrollments">
                        <field name="enrollment_ids">
                            <list>
                                <field name="student_id"/>
                                <field name="professor_id"/>
                            </list>
                        </field>
                    </page>
                </notebook>

            </sheet>
        </form>
    </field>
</record>

<!-- KANBAN VIEW -->
<record id="view_university_subject_kanban" model="ir.ui.view">
    <field name="name">university.subject.kanban</field>
    <field name="model">university.subject</field>
    <field name="arch" type="xml">
        <kanban>
            <field name="name"/>
            <field name="university_id"/>

            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click">
                        <strong><field name="name"/></strong>
                        <div>University: <field name="university_id"/></div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--          STUDENT          -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_student_tree" model="ir.ui.view">
        <field name="name">university.student.tree</field>
        <field name="model">university.student</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="university_id"/>
                <field name="tutor_id"/>
                <field name="enrollment_count"/>
            </list>
        </field>
</record>
<!-- FORM VIEW -->
  <record id="view_university_student_form" model="ir.ui.view">
        <field name="name">university.student.form</field>
        <field name="model">university.student</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_send_report_email" string="Send by Email" type="object" class="oe_highlight"/>
                    <button name="%(university.action_student_report)d" string="Print PDF" type="action"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_enrollments" type="object" class="oe_stat_button" icon="fa-graduation-cap">
                            <field name="enrollment_count" widget="statinfo" string="Enrollments"/>
                        </button>
                        <button name="action_view_grades" type="object" class="oe_stat_button" icon="fa-star">
                            <field name="grade_count" widget="statinfo" string="Grades"/>
                        </button>
                        <button name="action_view_subjects" type="object" class="oe_stat_button" icon="fa-book">
                            <field name="subject_count" widget="statinfo" string="Subjects"/>
                        </button>
                        <button name="action_view_professors" type="object" class="oe_stat_button" icon="fa-users">
                            <field name="professor_count" widget="statinfo" string="Professors"/>
                        </button>
                    </div>

                    <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'image_128'}"/>
                    
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name" placeholder="Student Name"/></h1>
                    </div>

                    <group>
                        <group>
                            <field name="partner_id"/>
                            <field name="user_id"/> 
                            <label for="email"/>
                            <div class="o_row">
                                <field name="email" placeholder="email@example.com"/>
                                <button name="action_send_grades_summary_js" 
                                        type="object" 
                                        class="btn btn-link p-0" 
                                        icon="fa-envelope-o" 
                                        title="Send summary"
                                        invisible="not email"/>
                            </div>
                        </group>
                        <group>
                            <field name="university_id"/>
                            <field name="tutor_id"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Enrollments">
                            <field name="enrollment_ids">
                                <list editable="bottom">
                                    <field name="subject_id"/>
                                    <field name="professor_id"/>
                                </list>
                            </field>
                        </page>
                        <page string="Address">
                            <group>
                                <field name="street"/>
                                <field name="city"/>
                                <field name="country_id"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
<!-- KANBAN VIEW -->
<record id="view_university_student_kanban" model="ir.ui.view">
        <field name="name">university.student.kanban</field>
        <field name="model">university.student</field>
        <field name="arch" type="xml">
            <kanban class="o_res_partner_kanban">
                <field name="id"/>
                <field name="image_1920"/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_global_click o_kanban_record_has_image_fill">
                            <div class="o_kanban_image_fill_left d-none d-md-block">
                                <field name="image_1920" widget="image" options="{'preview_image': 'image_128'}"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title"><field name="name"/></strong>
                                <div><i class="fa fa-university"/> <field name="university_id"/></div>
                                <div class="o_kanban_record_bottom mt-2">
                                    <div class="oe_kanban_bottom_left">
                                        <span class="badge rounded-pill text-bg-info"><field name="enrollment_count"/></span>
                                        <span class="badge rounded-pill text-bg-success ms-1"><field name="grade_count"/></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
<!-- ========================= -->
<!--        ENROLLMENT         -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_enrollment_tree" model="ir.ui.view">
    <field name="name">university.enrollment.tree</field>
    <field name="model">university.enrollment</field>
    <field name="arch" type="xml">
        <list string="Matrículas">
            <field name="name" decoration-bf="1"/>
            <field name="student_id"/>
            <field name="university_id" optional="hide"/>
            <field name="subject_id"/>
            <field name="professor_id"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_enrollment_form" model="ir.ui.view">
    <field name="name">university.enrollment.form</field>
    <field name="model">university.enrollment</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_title">
                    <label for="name" string="Código de Matrícula"/>
                    <h1><field name="name" readonly="1"/></h1>
                </div>

                <group>
                    <group string="Información del Estudiante">
                        <field name="student_id" options="{'no_create': True}"/>
                        <field name="university_id"/>
                    </group>
                    <group string="Asignación Académica">
                        <field name="subject_id" options="{'no_create': True}"/>
                        <field name="professor_id"/>
                    </group>
                </group>

                <notebook>
                    <page string="Calificaciones" name="grades">
                        <field name="grade_ids">
                            <list editable="bottom">
                                <field name="grade" string="Nota Final"/>
                            </list>
                        </field>
                    </page>
                </notebook>

            </sheet>
        </form>
    </field>
</record>

<!-- KANBAN VIEW -->
<record id="view_university_enrollment_kanban" model="ir.ui.view">
    <field name="name">university.enrollment.kanban</field>
    <field name="model">university.enrollment</field>
    <field name="arch" type="xml">
        <kanban sample="1">
            <field name="name"/>
            <field name="student_id"/>
            <field name="subject_id"/>

            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click d-flex flex-column p-2">
                        <div class="fw-bold fs-5 mb-1 text-primary">
                            <field name="name"/>
                        </div>
                        <div class="text-muted">
                            <i class="fa fa-user me-2"/>
                            <field name="student_id"/>
                        </div>
                        <div class="small">
                            <i class="fa fa-book me-2"/>
                            <field name="subject_id"/>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--           GRADE           -->
<!-- ========================= -->

<!-- TREE VIEW -->
<record id="view_university_grade_tree" model="ir.ui.view">
    <field name="name">university.grade.tree</field>
    <field name="model">university.grade</field>
    <field name="arch" type="xml">
        <list string="Grades">
            <field name="student_id"/>
            <field name="enrollment_id"/>
            <field name="grade" 
                   widget="badge" 
                   decoration-danger="grade &lt; 5" 
                   decoration-success="grade &gt;= 5"/>
        </list>
    </field>
</record>

<!-- FORM VIEW -->
<record id="view_university_grade_form" model="ir.ui.view">
    <field name="name">university.grade.form</field>
    <field name="model">university.grade</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_view_enrollment" type="object" class="oe_stat_button" icon="fa-file-text-o">
                        <div class="o_stat_info">
                            <span class="o_stat_text">Ver Matrícula</span>
                        </div>
                    </button>
                </div>

                <div class="oe_title">
                    <label for="grade" string="Calificación Registrada"/>
                    <h1>
                        <field name="grade" class="oe_inline"/>
                    </h1>
                </div>

                <group>
                    <group string="Datos de la Nota">
                        <field name="student_id" options="{'no_create': True}"/>
                        <field name="enrollment_id" options="{'no_create': True}"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
</record>
<!-- KANBAN VIEW -->
<record id="view_university_grade_kanban" model="ir.ui.view">
    <field name="name">university.grade.kanban</field>
    <field name="model">university.grade</field>
    <field name="arch" type="xml">
        <kanban sample="1">
            <field name="student_id"/>
            <field name="enrollment_id"/>
            <field name="grade"/>
            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click d-flex flex-column p-2">
                        <div class="fw-bold fs-5 mb-1">
                            <field name="student_id"/>
                        </div>
                        <div class="text-muted small mb-2">
                            <field name="enrollment_id"/>
                        </div>
                        <div class="mt-auto text-end">
                            <span t-attf-class="badge rounded-pill #{record.grade.raw_value &lt; 5 ? 'text-bg-danger' : 'text-bg-success'}">
                                <field name="grade"/>
                            </span>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>
<!-- ========================= -->
<!--          ACTIONS          -->
<!-- ========================= -->

<!-- UNIVERSITY -->
<record id="action_university_university" model="ir.actions.act_window">
    <field name="name">Universities</field>
    <field name="res_model">university.university</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- DEPARTMENT -->
<record id="action_university_department" model="ir.actions.act_window">
    <field name="name">Departments</field>
    <field name="res_model">university.department</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- PROFESSOR -->
<record id="action_university_professor" model="ir.actions.act_window">
    <field name="name">Professors</field>
    <field name="res_model">university.professor</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- SUBJECT -->
<record id="action_university_subject" model="ir.actions.act_window">
    <field name="name">Subjects</field>
    <field name="res_model">university.subject</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- STUDENT -->
<record id="action_university_student" model="ir.actions.act_window">
    <field name="name">Students</field>
    <field name="res_model">university.student</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- ENROLLMENT -->
<record id="action_university_enrollment" model="ir.actions.act_window">
    <field name="name">Enrollments</field>
    <field name="res_model">university.enrollment</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- GRADE -->
<record id="action_university_grade" model="ir.actions.act_window">
    <field name="name">Grades</field>
    <field name="res_model">university.grade</field>
    <field name="view_mode">list,kanban,form</field>
</record>

<!-- SMARTBUTTON ACTIONS -->

<!-- Department → Professors -->
<record id="action_department_professors" model="ir.actions.act_window">
    <field name="name">Professors</field>
    <field name="res_model">university.professor</field>
    <field name="view_mode">list,kanban,form</field>
    <field name="domain">[('department_id', '=', active_id)]</field>
</record>

<!-- Professor → Enrollments -->
<record id="action_professor_enrollments" model="ir.actions.act_window">
    <field name="name">Enrollments</field>
    <field name="res_model">university.enrollment</field>
    <field name="view_mode">list,form</field>
    <field name="domain">[('professor_id', '=', active_id)]</field>
</record>

<!-- Subject → Enrollments -->
<record id="action_subject_enrollments" model="ir.actions.act_window">
    <field name="name">Enrollments</field>
    <field name="res_model">university.enrollment</field>
    <field name="view_mode">list,form</field>
    <field name="domain">[('subject_id', '=', active_id)]</field>
</record>

<!-- Student → Enrollments -->
<record id="action_student_enrollments" model="ir.actions.act_window">
    <field name="name">Enrollments</field>
    <field name="res_model">university.enrollment</field>
    <field name="view_mode">list,form</field>
    <field name="domain">[('student_id', '=', active_id)]</field>
</record>

<!-- Student → Grades -->
<record id="action_student_grades" model="ir.actions.act_window">
    <field name="name">Grades</field>
    <field name="res_model">university.grade</field>
    <field name="view_mode">list,form</field>
    <field name="domain">[('student_id', '=', active_id)]</field>
</record>

</odoo>